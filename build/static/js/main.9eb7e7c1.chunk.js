(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{109:function(e,t,n){},119:function(e,t,n){},120:function(e,t,n){},121:function(e,t,n){},122:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(10),c=n.n(l),o=n(7),i=n.n(o),u=n(15),s=n(22),m=n.n(s),p="/api/blogs",d=null,f={getAll:function(){return m.a.get(p).then((function(e){return e.data}))},setToken:function(e){d="bearer ".concat(e)},create:function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:d}},e.next=3,m.a.post(p,t,n);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getUserBlogs:function(){var e=Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:d}},e.next=3,m.a.get(p,t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),deleteBlog:function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:d}},e.next=3,m.a.delete("".concat(p+"/"+t),n);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateBlog:function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:d}},e.next=3,m.a.patch(p+"/"+t.id,t,n);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},g=(n(109),n(158)),v=n(44),E=n(168),h=n(159),b=n(169),y=n(8),O=function(e){return{type:"SET_USERNAME",data:e}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERNAME":return t.data;default:return e}},k=function(e){return{type:"SET_PASSWORD",data:e}},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PASSWORD":return t.data;default:return e}},S={login:function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},j=function(e){return{type:"SET_USER",data:e}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return t.data;default:return e}},_=n(67),T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return function(n){n({type:"SET_ERROR",data:e}),_.timeoutCollection.removeAll(),setTimeout((function(){n({type:"REMOVE_ERROR",data:null})}),1e3*t)}},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ERROR":case"REMOVE_ERROR":return t.data;default:return e}},C=function(e){return{type:"SET_BLOGS",data:e}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BLOGS":return t.data;default:return e}},L=function(e){return{type:"SET_PAGE",data:e}},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PAGE":return t.data;default:return e}},A=n(26),F=n.n(A),z=n(14);function I(e){return r.a.createElement(b.a,Object.assign({elevation:6,variant:"filled"},e))}var G=function(){var e=Object(y.b)(),t=Object(z.g)(),n=Object(y.c)((function(e){return e.username})),a=Object(y.c)((function(e){return e.password})),l=Object(y.c)((function(e){return e.error})),c=function(){var t=Object(u.a)(i.a.mark((function t(r){var l,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),t.prev=1,t.next=4,S.login({username:n,password:a});case 4:return l=t.sent,e(j(l)),f.setToken(l.token),F.a.set("loggedBlogAppUser",JSON.stringify(l),{expires:7}),e(O("")),e(k("")),t.next=12,f.getUserBlogs();case 12:c=t.sent,e(C(c)),e(L("all")),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),e(T(t.t0.response.data.error));case 20:case"end":return t.stop()}}),t,null,[[1,17]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,null,r.a.createElement(v.a,{paragraph:!0,align:"center",variant:"h3",color:"primary"},"Bloggie"),r.a.createElement(g.a,null,r.a.createElement("form",{id:"loginForm",onSubmit:c},r.a.createElement(E.a,{value:n,onChange:function(t){var n=t.target;return e(O(n.value))},size:"small",label:"username",variant:"outlined",required:!0}),r.a.createElement(E.a,{value:a,onChange:function(t){var n=t.target;return e(k(n.value))},size:"small",type:"password",label:"password",variant:"outlined",required:!0}),r.a.createElement(h.a,{size:"small",type:"submit",variant:"contained",color:"primary"},"Login"),r.a.createElement("div",null,r.a.createElement("p",null,"Not a user? ",r.a.createElement("button",{onClick:function(){e(L("register")),t.push("/register")},style:{display:"inline-block"}},"Register here")))),null!==l?r.a.createElement("div",{className:"alertWrapper"},r.a.createElement(I,{severity:"error"},l)):null)))},P=n(21),D=n(160),M=n(161),W=n(163),J=n(162),K=n(75),V=n.n(K),q=n(72),H=n.n(q),Q=n(74),X=n.n(Q),Y=n(73),Z=n.n(Y),$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_LIKES_OF_COMPONENT":var n=e.filter((function(e){return e===t.id}));return n?e:e.concat(t.id);case"CLOSE_LIKES_OF_COMPONENT":return e.filter((function(e){return e!==t.id}));case"TOGGLE_VIEW_OF_LIKES":var a=e.filter((function(e){return e===t.id}));return a.length>0?e.filter((function(e){return e!==t.id})):e.concat(t.id);default:return e}},ee=Object(D.a)({root:{minWidth:275,maxWidth:100,position:"relative"},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},header:{backgroundColor:"#1693BB",color:"white",fontSize:"1rem !important",minHeight:"5rem",textAlign:"center"},content:{position:"relative"},pos:{marginBottom:12},action:{backgroundColor:"#B03972",position:"relative",justifyContent:"center","&:hover":{cursor:"pointer",backgroundColor:"hsla(331, 51%, 46%, 0.84)"},"&:active":{backgroundColor:"hsla(331, 51%, 43%, 0.91)"}},button:{color:"white",marginRight:"6px"},spanLink:{position:"absolute",width:"100%",height:"100%",top:0,left:0,zIndex:500},expandIconContainer:{position:"absolute",top:0,left:5,"&:hover":{cursor:"pointer",color:"white"}},deleteIconContainer:{position:"absolute",top:0,right:0,"&:hover":{cursor:"pointer",color:"#ce054d"},"&:active":{color:"red"},"&:focus":{color:"white"}}}),te=function(e){var t=e.blog,n=e.index,a=Object(y.c)((function(e){return e.showLikes.filter((function(e){return e===t.id})).length>0})),l=Object(y.c)((function(e){return e.blogs})),c=ee(),o=Object(y.b)(),s=function(){var e=Object(u.a)(i.a.mark((function e(){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.filter((function(e){return e.id!==t.id})),e.next=3,f.deleteBlog(t.id);case 3:return a=e.sent,o(C(n)),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){console.log(t.id),o({type:"TOGGLE_VIEW_OF_LIKES",id:t.id})},p=function(){var e=Object(u.a)(i.a.mark((function e(){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.updateBlog(t);case 2:return n=e.sent,e.next=5,f.getUserBlogs();case 5:return a=e.sent,o(C(a)),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"card"},r.a.createElement(M.a,{className:c.root,variant:"outlined"},r.a.createElement(J.a,{className:c.header,titleTypographyProps:{variant:"subtitle1"},title:t.title,subheader:"by "+t.author}),!1===a?r.a.createElement("div",{onClick:m,className:c.expandIconContainer},r.a.createElement(H.a,{style:{color:"inherit"}})):r.a.createElement("div",{onClick:m,className:c.expandIconContainer},r.a.createElement(Z.a,{style:{color:"inherit"}})),r.a.createElement("div",{onClick:s,className:c.deleteIconContainer},r.a.createElement(X.a,{style:{color:"inherit"}})),!1===a?r.a.createElement("span",null):r.a.createElement("div",{className:"toggableContent"},r.a.createElement("p",{style:{textAlign:"center",fontSize:"1rem"}},"Likes: ",r.a.createElement("input",{value:t.likes,onChange:function(e){var a=t;a.likes=e.target.value;var r=[].concat(l);r[n]=a,o(C(r))},type:"text"}),r.a.createElement("button",{onClick:p},"change"))),r.a.createElement(W.a,{className:c.action},r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:t.url},r.a.createElement("span",{className:c.spanLink})),r.a.createElement(v.a,{className:c.button},"Go to blog"),r.a.createElement(V.a,{disabled:!0,style:{color:"white"}}))))},ne=n(166),ae=n(165),re=n(167),le=n(170),ce=n(164),oe=(n(119),function(e){return{type:"SET_SUCCESS",data:e}}),ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SUCCESS":return t.data;default:return e}},ue=function(e){return{type:"SET_SUBMITTED",data:e}},se=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SUBMITTED":return t.data;default:return e}};function me(e){return r.a.createElement(b.a,Object.assign({elevation:6,variant:"filled"},e))}var pe=function(){var e=Object(y.c)((function(e){return e.error})),t=Object(y.c)((function(e){return e.isSubmitted})),n=Object(y.c)((function(e){return e.success})),a=Object(y.b)(),l=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r,l,c,o,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target.title.value,r=t.target.author.value,l=t.target.likes.value,c=t.target.url.value,o={title:n,author:r,likes:l,url:c},a(ue(!0)),e.prev=7,e.next=10,f.create(o);case 10:return e.sent,e.next=13,f.getUserBlogs();case 13:u=e.sent,a(C(u)),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(7),a(ue(!1)),a(oe("error")),a(T(e.t0.response.data.error));case 22:setTimeout((function(){a(ue(!1)),a(oe(!0))}),2e3),setTimeout((function(){a(oe(null))}),5e3);case 24:case"end":return e.stop()}}),e,null,[[7,17]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{onSubmit:l},r.a.createElement("div",{className:"input"},r.a.createElement("label",{className:"input_title",htmlFor:"title"},r.a.createElement("span",null,r.a.createElement("p",null,"Title"))),r.a.createElement("input",{className:"input_value",type:"text",id:"title"})),r.a.createElement("div",{className:"input"},r.a.createElement("label",{className:"input_title",htmlFor:"author"},r.a.createElement("span",null,r.a.createElement("p",null,"Author"))),r.a.createElement("input",{className:"input_value",type:"text",id:"author"})),r.a.createElement("div",{className:"input"},r.a.createElement("label",{className:"input_title",htmlFor:"likes"},r.a.createElement("span",null,r.a.createElement("p",null,"Likes"))),r.a.createElement("input",{className:"input_value",type:"text",id:"likes"})),r.a.createElement("div",{className:"input"},r.a.createElement("label",{className:"input_title",htmlFor:"url"},r.a.createElement("span",null,r.a.createElement("p",null,"URL"))),r.a.createElement("input",{className:"input_value",type:"text",id:"url"})),r.a.createElement("button",{className:"btn",type:"submit"},"Submit"),!0===t?r.a.createElement(ce.a,null):null,!0===n?r.a.createElement(me,{severity:"success"},"Blog added!"):"error"===n?r.a.createElement(me,{severity:"error"},e):null)},de=(n(120),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"date",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SORT":return t.data;default:return e}}),fe=Object(D.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},username:{flexGrow:4},maincolor:{backgroundColor:"#B03972"},newLink:{flexGrow:2},allBlogs:{flexGrow:2},title:{fontSize:"2.3rem"},toggleButton:{border:"none",color:"white"},container:{margin:"2rem 1rem"}}})),ge=function(){var e=Object(y.b)();return r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement("h2",{style:{color:"#3f51b5"}},"No blogs yet, try ",r.a.createElement("button",{className:"newPage",onClick:function(){e(L("new"))},style:{padding:".5rem 2rem",borderRadius:"5px",border:"1px solid grey",cursor:"pointer"}},"Adding a new blog")))},ve=function(){var e=fe(),t=Object(y.c)((function(e){return e.user})),n=Object(y.c)((function(e){return e.blogs})),a=Object(y.c)((function(e){return e.page})),l=Object(y.c)((function(e){return e.sortBy})),c=Object(y.b)(),o=Object(z.g)(),s=function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.getUserBlogs();case 2:t=e.sent,c(C(t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(ae.a,{position:"static"},r.a.createElement(ne.a,{className:e.maincolor},r.a.createElement(v.a,{variant:"h6",edge:"start",className:e.username},t.name),r.a.createElement(le.a,{value:a,exclusive:!0,onChange:function(e,t){c(L(t)),"new"===t?o.push("/blogs/".concat(t)):"logout"===t?o.push("/logout"):o.push("/blogs")},size:"medium"},r.a.createElement(re.a,{className:e.toggleButton,value:"all"},r.a.createElement("div",{className:e.allBlogs,color:"inherit"},"All your blogs")),r.a.createElement(re.a,{className:e.toggleButton,value:"new"},r.a.createElement("div",{className:e.newLink,color:"inherit"},"Add new link")),r.a.createElement(re.a,{className:e.toggleButton,value:"logout"},r.a.createElement("div",{className:e.newLink,color:"inherit"},"Logout"))))),"all"===a?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",margin:"1rem"}},r.a.createElement("div",null,r.a.createElement("p",{style:{display:"inline-block",fontSize:"1rem",marginRight:"1rem",color:"grey"}},"Sort by"),r.a.createElement(le.a,{value:l,exclusive:!0,onChange:function(e,t){c({type:"SET_SORT",data:t})}},r.a.createElement(re.a,{value:"date",onClick:s},"Date"),r.a.createElement(re.a,{value:"likes",onClick:function(){var e=Object(P.a)(n).sort((function(e,t){return parseFloat(t.likes)-parseFloat(e.likes)}));c(C(e))}},"Likes")))),n.length<1?r.a.createElement(ge,{setPage:L}):r.a.createElement("div",{className:"grid-container"},n.map((function(e,t){return r.a.createElement(te,{key:e.id,index:t,blog:e})})))):r.a.createElement(pe,null))},Ee=function(){var e=Object(z.g)();return F.a.remove("loggedBlogAppUser"),e.push("/"),window.location.reload(!0),r.a.createElement("div",null)},he=(n(121),{registerUser:function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("/api/users",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});function be(e){return r.a.createElement(b.a,Object.assign({elevation:6,variant:"filled"},e))}var ye=function(){var e=Object(y.b)(),t=Object(z.g)(),n=Object(y.c)((function(e){return e.error}));"register"!==Object(y.c)((function(e){return e.page}))&&e(L("register"));var a=function(){var t=Object(u.a)(i.a.mark((function t(n){var a,r,l,c,o,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a=n.target.name.value,r=n.target.username.value,l=n.target.password.value,c={name:a,username:r,password:l},t.prev=5,t.next=8,he.registerUser(c);case 8:return t.sent,t.next=11,S.login({username:r,password:l});case 11:return o=t.sent,e(j(o)),f.setToken(o.token),F.a.set("loggedBlogAppUser",JSON.stringify(o),{expires:7}),t.next=17,f.getUserBlogs();case 17:u=t.sent,e(C(u)),e(L("all")),t.next=25;break;case 22:t.prev=22,t.t0=t.catch(5),e(T(t.t0.response.data.error));case 25:case"end":return t.stop()}}),t,null,[[5,22]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("div",{className:"nav"},r.a.createElement(h.a,{size:"small",onClick:function(){e(L("login")),t.push("/login")},variant:"contained",color:"secondary"},"Go back to Login page")),r.a.createElement("form",{onSubmit:a},r.a.createElement("div",{className:"input_group"},r.a.createElement("label",{htmlFor:"Password"},"Name"),r.a.createElement("input",{placeholder:"John Doe",type:"text",name:"name",id:"name"})),r.a.createElement("div",{className:"input_group"},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{placeholder:"3-15 characters",type:"text",id:"username"})),r.a.createElement("div",{className:"input_group"},r.a.createElement("label",{htmlFor:"Password"},"Password"),r.a.createElement("input",{placeholder:"Must be a secure password",type:"password",id:"password"})),r.a.createElement(h.a,{size:"small",type:"submit",variant:"contained",color:"primary"},"Register")),null!==n?r.a.createElement("div",{className:"alertWrapper"},r.a.createElement(be,{severity:"error"},n)):null)},Oe=function(){var e=Object(y.b)(),t=Object(y.c)((function(e){return e.user}));return Object(a.useEffect)((function(){var t=F.a.get("loggedBlogAppUser");if(t){var n=JSON.parse(t);e(j(n)),f.setToken(n.token),f.getUserBlogs().then((function(t){return e(C(t))})).catch((function(e){console.log("error fetching blogs: ",e)}))}else e(L("login"))}),[e]),r.a.createElement(r.a.Fragment,null,r.a.createElement(z.d,null,r.a.createElement(z.b,{path:"/logout"},r.a.createElement(Ee,null)),r.a.createElement(z.b,{path:"/register"},t?r.a.createElement(z.a,{to:"/blogs"}):r.a.createElement(ye,null)),r.a.createElement(z.b,{path:"/login"},t?r.a.createElement(z.a,{to:"/blogs"}):r.a.createElement(G,null)),r.a.createElement(z.b,{path:"/blogs"},t?r.a.createElement(ve,null):r.a.createElement(z.a,{to:"/"})),r.a.createElement(z.b,{path:"/"},null===t?r.a.createElement(z.a,{to:"/login"}):r.a.createElement(z.a,{to:"/blogs"}))))},we=n(32),ke=n(76),xe=n(77),Se=Object(we.combineReducers)({user:N,username:w,password:x,error:B,blogs:R,success:ie,isSubmitted:se,page:U,sortBy:de,showLikes:$}),je=Object(ke.composeWithDevTools)({trace:!0,traceLimit:25}),Ne=Object(we.createStore)(Se,je(Object(we.applyMiddleware)(xe.a))),_e=n(29);c.a.render(r.a.createElement(y.a,{store:Ne},r.a.createElement(_e.a,null,r.a.createElement(Oe,null))),document.getElementById("root"))},86:function(e,t,n){e.exports=n(122)}},[[86,1,2]]]);
//# sourceMappingURL=main.9eb7e7c1.chunk.js.map