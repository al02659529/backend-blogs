(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{67:function(e,t,a){e.exports=a(97)},95:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(8),o=a.n(l),c=a(13),i=a.n(c),s=a(16),u=a(11),m=a(136),p=a(133),g=a(138),f=a(140),d=a(33),b=a(139),v=a(54),h=a.n(v),E=Object(p.a)({root:{minWidth:275,maxWidth:100},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},header:{backgroundColor:"#1693BB",color:"white",fontSize:"1rem !important",minHeight:"5rem",textAlign:"center"},content:{position:"relative"},pos:{marginBottom:12},action:{backgroundColor:"#B03972",position:"relative",justifyContent:"center","&:hover":{cursor:"pointer",backgroundColor:"hsla(331, 51%, 46%, 0.84)"},"&:active":{backgroundColor:"hsla(331, 51%, 43%, 0.91)"}},button:{color:"white",marginRight:"6px"},spanLink:{position:"absolute",width:"100%",height:"100%",top:0,left:0,zIndex:500}}),w=function(e){var t=e.blog,a=E();return r.a.createElement(m.a,{item:!0,lg:4},r.a.createElement(g.a,{className:a.root,variant:"outlined"},r.a.createElement(b.a,{className:a.header,titleTypographyProps:{variant:"subtitle1"},title:t.title,subheader:"by "+t.author}),r.a.createElement(f.a,{className:a.action},r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:t.url},r.a.createElement("span",{className:a.spanLink})),r.a.createElement(d.a,{className:a.button},"Go to blog"),r.a.createElement(h.a,{disabled:!0,style:{color:"white"}}))))},k=a(25),y=a.n(k),j=null,N={getAll:function(){return y.a.get("/api/blogs").then((function(e){return e.data}))},setToken:function(e){j="bearer ".concat(e)},create:function(){var e=Object(s.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:j}},e.next=3,y.a.post("/api/blogs",t,a);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getUserBlogs:function(){var e=Object(s.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:j}},e.next=3,y.a.get("/api/blogs",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},O={login:function(){var e=Object(s.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("/api/login",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},x=(a(95),a(141)),B=a(147),S=a(142),T=a(148);function C(e){return r.a.createElement(T.a,Object.assign({elevation:6,variant:"filled"},e))}var L=function(e){var t=e.username,a=e.password,n=e.setUsername,l=e.setPassword,o=e.handleLogin,c=e.error;return r.a.createElement(x.a,null,r.a.createElement(d.a,{paragraph:!0,align:"center",variant:"h3",color:"primary"},"Bloggie"),r.a.createElement(x.a,null,r.a.createElement("form",{id:"loginForm",onSubmit:o},r.a.createElement(B.a,{value:t,onChange:function(e){var t=e.target;return n(t.value)},size:"small",label:"username",variant:"outlined",required:!0}),r.a.createElement(B.a,{value:a,onChange:function(e){var t=e.target;return l(t.value)},size:"small",type:"password",label:"password",variant:"outlined",required:!0}),r.a.createElement(S.a,{size:"small",type:"submit",variant:"contained",color:"primary"},"Login"),null!==c?r.a.createElement(C,{severity:"error"},c):r.a.createElement("span",null))))},z=a(145),A=a(144),U=a(146),_=a(149),F=a(143);a(96);function G(e){return r.a.createElement(T.a,Object.assign({elevation:6,variant:"filled"},e))}Object(p.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));var I=function(e){var t=e.updateBlogs,a=r.a.useState("false"),n=Object(u.a)(a,2),l=n[0],o=n[1],c=r.a.useState(null),m=Object(u.a)(c,2),p=m[0],g=m[1],f=r.a.useState(""),d=Object(u.a)(f,2),b=d[0],v=d[1],h=function(){var e=Object(s.a)(i.a.mark((function e(a){var n,r,l,c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),n=a.target.title.value,r=a.target.author.value,l=a.target.likes.value,c=a.target.url.value,o(!0),s={title:n,author:r,likes:l,url:c},N.create(s).then((function(){N.getUserBlogs().then((function(e){return t(e)})).catch((function(e){console.log("error fetching blogs: ",e)})),setTimeout((function(){o(!1),g(!0)}),2e3),setTimeout((function(){g("")}),5e3)})).catch((function(e){o(!1),g("error"),v(e.response.data.error),setTimeout((function(){g(null),v("")}),5e3)}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{onSubmit:h},r.a.createElement("div",{className:"input"},r.a.createElement("label",{className:"input_title",htmlFor:"title"},r.a.createElement("span",null,r.a.createElement("p",null,"Title"))),r.a.createElement("input",{className:"input_value",type:"text",id:"title"})),r.a.createElement("div",{className:"input"},r.a.createElement("label",{className:"input_title",htmlFor:"author"},r.a.createElement("span",null,r.a.createElement("p",null,"Author"))),r.a.createElement("input",{className:"input_value",type:"text",id:"author"})),r.a.createElement("div",{className:"input"},r.a.createElement("label",{className:"input_title",htmlFor:"likes"},r.a.createElement("span",null,r.a.createElement("p",null,"Likes"))),r.a.createElement("input",{className:"input_value",type:"text",id:"likes"})),r.a.createElement("div",{className:"input"},r.a.createElement("label",{className:"input_title",htmlFor:"url"},r.a.createElement("span",null,r.a.createElement("p",null,"URL"))),r.a.createElement("input",{className:"input_value",type:"text",id:"url"})),r.a.createElement("button",{className:"btn",type:"submit"},"Submit"),!0===l?r.a.createElement(F.a,null):r.a.createElement("span",null),!0===p?r.a.createElement(G,{severity:"success"},"Blog added!"):"error"===p?r.a.createElement(G,{severity:"error"},b):r.a.createElement("span",null))},J=Object(p.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},username:{flexGrow:4},maincolor:{backgroundColor:"#B03972"},newLink:{flexGrow:2},allBlogs:{flexGrow:2},title:{fontSize:"2.3rem"},toggleButton:{border:"none",color:"white"},container:{marginTop:"2rem"}}})),P=function(e){var t=e.user,a=e.blogs,n=e.updateBlogs,l=J(),o=r.a.useState("all"),c=Object(u.a)(o,2),i=c[0],s=c[1];return r.a.createElement("div",null,r.a.createElement(A.a,{position:"static"},r.a.createElement(z.a,{className:l.maincolor},r.a.createElement(d.a,{variant:"h6",edge:"start",className:l.username},t.name),r.a.createElement(_.a,{value:i,exclusive:!0,onChange:function(e,t){s(t)},size:"medium"},r.a.createElement(U.a,{className:l.toggleButton,value:"all"},r.a.createElement("div",{className:l.allBlogs,color:"inherit"},"All your blogs")),r.a.createElement(U.a,{className:l.toggleButton,value:"new"},r.a.createElement("div",{className:l.newLink,color:"inherit"},"Add new link"))),r.a.createElement(S.a,{onClick:function(){localStorage.clear(),window.location.reload(!0)},color:"inherit"},"Logout"))),"all"===i?r.a.createElement(m.a,{className:l.container,container:!0,justify:"space-evenly"},a.map((function(e){return r.a.createElement(w,{key:e.id,blog:e})}))):r.a.createElement(I,{updateBlogs:n}))},R=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)(""),c=Object(u.a)(o,2),m=c[0],p=c[1],g=Object(n.useState)(""),f=Object(u.a)(g,2),d=f[0],b=f[1],v=Object(n.useState)(null),h=Object(u.a)(v,2),E=h[0],w=h[1],k=Object(n.useState)(null),y=Object(u.a)(k,2),j=y[0],x=y[1];Object(n.useEffect)((function(){var e=window.localStorage.getItem("loggedBlogAppUser");if(e){var t=JSON.parse(e);w(t),N.setToken(t.token),N.getUserBlogs().then((function(e){return l(e)})).catch((function(e){console.log("error fetching blogs: ",e)}))}}),[]);var B=function(){var e=Object(s.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,O.login({username:m,password:d});case 4:a=e.sent,w(a),N.setToken(a.token),window.localStorage.setItem("loggedBlogAppUser",JSON.stringify(a)),p(""),b(""),N.getUserBlogs().then((function(e){return l(e)})).catch((function(e){console.log("error fetching blogs: ",e)})),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),x(e.t0.response.data.error),setTimeout((function(){x(null)}),4e3);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,null===E?r.a.createElement(L,{error:j,username:m,password:d,setUsername:p,setPassword:b,handleLogin:B}):r.a.createElement(P,{user:E,blogs:a,updateBlogs:l}))};o.a.render(r.a.createElement(R,null),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.8b7baa55.chunk.js.map